
<!-- æŠ•ç¨¿ä¸€è¦§ã‚¿ã‚¤ãƒˆãƒ« -->
<h2 class="trades-title">æŠ•ç¨¿ä¸€è¦§</h2>

<div class="search-area">
  <%= form_with url: trades_path, method: :get, local: true, html: { class: "search-form" } do %>
    <div class="field">
      <%= label_tag :category, "ã‚«ãƒ†ã‚´ãƒªãƒ¼ã§çµžã‚Šè¾¼ã‚€" %>
      <%= select_tag :category, options_for_select([
        ["æœ¬ãƒ»é›‘èªŒãƒ»æ¼«ç”»", "æœ¬ãƒ»é›‘èªŒãƒ»æ¼«ç”»"], 
        ["ã‚²ãƒ¼ãƒ ãƒ»ãŠã‚‚ã¡ã‚ƒãƒ»ã‚°ãƒƒã‚º", "ã‚²ãƒ¼ãƒ ãƒ»ãŠã‚‚ã¡ã‚ƒãƒ»ã‚°ãƒƒã‚º"], 
        ["ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³", "ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³"],
        ["å®¶å…·ãƒ»ã‚¤ãƒ³ãƒ†ãƒªã‚¢", "å®¶å…·ãƒ»ã‚¤ãƒ³ãƒ†ãƒªã‚¢"],
        ["ã‚³ã‚¹ãƒ¡ãƒ»ç¾Žå®¹", "ã‚³ã‚¹ãƒ¡ãƒ»ç¾Žå®¹"],
        ["ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢ãƒ»é‡£ã‚Šãƒ»æ—…è¡Œç”¨å“", "ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢ãƒ»é‡£ã‚Šãƒ»æ—…è¡Œç”¨å“"],
        ["ãƒ€ã‚¤ã‚¨ãƒƒãƒˆãƒ»å¥åº·", "ãƒ€ã‚¤ã‚¨ãƒƒãƒˆãƒ»å¥åº·"],
        ["é£Ÿå“ãƒ»é£²æ–™ãƒ»é…’", "é£Ÿå“ãƒ»é£²æ–™ãƒ»é…’"],
        ["ã‚¹ãƒãƒ¼ãƒ„", "ã‚¹ãƒãƒ¼ãƒ„"],
        ["ãƒãƒ³ãƒ‰ãƒ¡ã‚¤ãƒ‰ãƒ»æ‰‹èŠ¸", "ãƒãƒ³ãƒ‰ãƒ¡ã‚¤ãƒ‰ãƒ»æ‰‹èŠ¸"],
        ["ã‚­ãƒƒãƒãƒ³ãƒ»æ—¥ç”¨å“", "ã‚­ãƒƒãƒãƒ³ãƒ»æ—¥ç”¨å“"],
        ["ãƒ›ãƒ“ãƒ¼ãƒ»æ¥½å™¨ãƒ»ã‚¢ãƒ¼ãƒˆ", "ãƒ›ãƒ“ãƒ¼ãƒ»æ¥½å™¨ãƒ»ã‚¢ãƒ¼ãƒˆ"],
        ["ãã®ä»–", "ãã®ä»–"]
      ], params[:category]), include_blank: "é¸æŠžã—ã¦ä¸‹ã•ã„", class: "category-select" %>
    </div>
    <%= submit_tag "æ¤œç´¢", class: "search-button" %>
  <% end %>
</div>

<!-- æŠ•ç¨¿ä¸€è¦§ã‚°ãƒªãƒƒãƒ‰ -->
<div class="trades-container" data-controller="card-click">
  <% @trades.each do |t| %>
    <div class="trade-card" data-href="<%= trade_path(t) %>">

      <!-- å•†å“ç”»åƒï¼ˆä¸Šéƒ¨ï¼‰ -->
      <% if t.image.attached? %>
        <div class="trade-image-wrapper">
          <%= image_tag t.image, class: "trade-image" %>
        </div>
      <% else %>
        <div class="trade-image-wrapper no-image">
          <%= image_tag "no_image.png", class: "trade-image" %>
        </div>
      <% end %>

      <!-- ã„ã„ã­ãƒœã‚¿ãƒ³ã®ã¿ -->
      <% if user_signed_in? %>
        <% like = t.likes.find_by(user: current_user) %>
        <div class="like-section">
          <% if like %>
            <%= button_to "ðŸ‘ã‚’å‰Šé™¤", trade_like_path(t, like),
                          method: :delete,
                          class: "like-button cancel" %>
          <% else %>
            <%= button_to "ðŸ‘", trade_likes_path(t),
                          method: :post,
                          class: "like-button" %>
          <% end %>
        </div>
      <% end %>

    </div>
  <% end %>
</div>