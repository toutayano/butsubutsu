<h1 class="page-title"><%= @user.nickname.presence || "未設定" %> さんのプロフィール</h1>

<div class="profile-slider-container">
  <div class="profile-slider">
    
    <div class="profile-card">
      <% user = @user %>

      <% if user.avatar.attached? %>
        <%= image_tag user.avatar, class: "profile-avatar" %>
      <% else %>
        <%= image_tag "default_avatar.png", class: "profile-avatar" %>
      <% end %>

      <div class="profile-info">
        <p><strong>ニックネーム:</strong> <%= user.nickname %></p>
        <p><strong>学年:</strong> <%= user.grade %></p>
        <p><strong>性別:</strong> <%= user.gender %></p>
        <p><strong>学部:</strong> <%= user.faculty %></p>
        <p><strong>大学:</strong> <%= user.university %></p>
        <p><strong>学科:</strong> <%= user.department %></p>
      </div>
    </div>

    
  </div>
</div>

<hr>

<h1 class="page-title"><%= @user.nickname.presence || "未設定" %> さんの投稿一覧</h1>

<div class="trades-container" data-controller="card-click">
  <% if @user_trades.any? %>
    <% @user_trades.each do |t| %>
      <div class="trade-card" data-href="<%= trade_path(t) %>">

        <!-- 商品画像（上部） -->
        <% if t.image.attached? %>
          <div class="trade-image-wrapper">
            <%= image_tag t.image, class: "trade-image" %>
          </div>
        <% else %>
          <div class="trade-image-wrapper no-image">
            <%= image_tag "no_image.png", class: "trade-image" %>
          </div>
        <% end %>

        <!-- いいねボタンのみ -->
        <% if user_signed_in? %>
          <% like = t.likes.find_by(user: current_user) %>
          <div class="like-section">
            <% if like %>
              <%= button_to "👍を削除", trade_like_path(t, like),
                            method: :delete,
                            class: "like-button cancel" %>
            <% else %>
              <%= button_to "👍", trade_likes_path(t),
                            method: :post,
                            class: "like-button" %>
            <% end %>
          </div>
        <% end %>

      </div>
    <% end %>
  <% else %>
    <p>投稿はまだありません。</p>
  <% end %>
</div>