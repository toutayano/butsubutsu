<h1 class="page-title">プロフィール</h1>

<div class="profile-slider-container">
  <div class="profile-slider">
    
    <div class="profile-card">
      <% if current_user.avatar.attached? %>
        <%= image_tag current_user.avatar, class: "profile-avatar" %>
      <% else %>
        <%= image_tag "default_avatar.png", class: "profile-avatar" %>
      <% end %>

      <div class="profile-info">
        <p><strong>ニックネーム:</strong> <%= current_user.nickname %></p>
        <p><strong>学年:</strong> <%= current_user.grade %></p>
        <p><strong>性別:</strong> <%= current_user.gender %></p>
        <p><strong>学部:</strong> <%= current_user.faculty %></p>
        <p><strong>大学:</strong> <%= current_user.university %></p>
        <p><strong>学科:</strong> <%= current_user.department %></p>
      </div>

      <div class="edit-button-container">
        <%= link_to "プロフィールを編集", edit_profile_path, class: "edit-profile-button" %>
      </div>
    </div>

    
  </div>
</div>
  



<h2 class="page-title">自分の投稿</h2>
<div class="trades-container" data-controller="card-click">
  <% @my_trades.each do |t| %>
    <div class="trade-card" data-href="<%= trade_path(t) %>">
      
      <% if t.image.attached? %>
        <div class="trade-image-wrapper">
          <%= image_tag t.image, class: "trade-image" %>
        </div>
      <% end %>

      <!-- 商品名・いいね数は削除 -->
    </div>
  <% end %>
</div>

<h2 class="page-title">いいねした投稿</h2>

<!-- 投稿一覧グリッドと同じ構造に揃える -->
<div class="trades-container" data-controller="card-click">
  <% @liked_trades.each do |t| %>
    <div class="trade-card" data-href="<%= trade_path(t) %>">

      <!-- 商品画像（上部） -->
      <% if t.image.attached? %>
        <div class="trade-image-wrapper">
          <%= image_tag t.image, class: "trade-image" %>
        </div>
      <% else %>
        <div class="trade-image-wrapper no-image">
          <%= image_tag "no_image.png", class: "trade-image" %>
        </div>
      <% end %>

      <!-- いいねボタンのみ -->
      <% if user_signed_in? %>
        <% like = t.likes.find_by(user: current_user) %>
        <div class="like-section">
          <% if like %>
            <%= button_to "👍を削除", trade_like_path(t, like),
                          method: :delete,
                          class: "like-button cancel" %>
          <% else %>
            <%= button_to "👍", trade_likes_path(t),
                          method: :post,
                          class: "like-button" %>
          <% end %>
        </div>
      <% end %>

    </div>
  <% end %>
</div>
